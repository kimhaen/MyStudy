
![author](https://img.shields.io/badge/author-daesungRa-lightgray.svg?style=flat-square)
![date](https://img.shields.io/badge/date-190508-lightgray.svg?style=flat-square)

# ê°€ìƒí™˜ê²½ê³¼ virtualenv, pip, pipenv

> [velog - pipenv í¬ìŠ¤íŠ¸](https://velog.io/@doondoony/pipenv-101)ì— ë”°ë¥´ë©´, ì—…ë°ì´íŠ¸ê°€ ëŠë¦¬ê³  ì‚¬ìš©ìê°€ ëª¨ë¥´ëŠ” ë¸”ë™ë°•ìŠ¤ ë™ì‘ì´ ë§ì•„ pipenv ì‚¬ìš©ì„ ë§Œë¥˜í•œë‹¤..
ê·¸ë˜ë„ ì–´ì¨Œë“  pip ì™€ virtualenv ì˜ í¸ë¦¬í•œ ê²°í•©íŒì´ë¼ëŠ” ì ì—ì„œ ì‚¬ìš©ì„ í•´ë³´ì ã…ã…

## ê°€ìƒí™˜ê²½ì˜ í•„ìš”ì„±

- ê³„ì† ì„¤ëª…í–ˆë“¯ì´ ì§€ì†ì ìœ¼ë¡œ ë°œì „í•˜ëŠ” íŒŒì´ì¬ ì»¤ë®¤ë‹ˆí‹°ì—ì„œ ê°€ìƒí™˜ê²½ì˜ ê°œë…ì€ ë§¤ìš° ì¤‘ìš”í•˜ë‹¤.
- íŒŒì´ì¬ ë° íŒ¨í‚¤ì§€ ë²„ì „ì— ë”°ë¥¸ íŒŒì´ì¬ ë¬¸ë²•, í˜¸í™˜ì„± ë° ì˜ì¡´ì„±ì´ ë‹¤ë¥´ê±°ë‚˜ ë³µì¡í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì´ë‹¤.
- íŠ¹íˆ í˜‘ì—…ì´ë‚˜ ìµœì¢…ì ì¸ ë°°í¬ë¥¼ ìœ„í•´ì„œë¼ë©´ ì¼ê´€ëœ ê°€ìƒí™˜ê²½ì„ êµ¬ì¶•í•˜ëŠ” ê²ƒì€ í•„ìˆ˜ì ì¸ ì‚¬í•­ì´ë‹¤.
- ê°€ìƒí™˜ê²½ì„ êµ¬ì¶•í•˜ë©´, ìš°ì„  ê¸€ë¡œë²Œë¡œ ì„¤ì¹˜ëœ íŒŒì´ì¬ ê´€ë ¨ êµ¬ì„±ìš”ì†Œ(ëŸ°íƒ€ì„, íŒ¨í‚¤ì§€ ë§¤ë‹ˆì§• íˆ´, ë¼ì´ë¸ŒëŸ¬ë¦¬ ì €ì¥ì†Œ)ë“¤ì´ ê²©ë¦¬ëœ ê³µê°„ì— ë§Œë“¤ì–´ì§„ë‹¤(ë³µì œ).
- ì´í›„ ë§Œë“¤ê³ ì í•˜ëŠ” íŒŒì´ì¬ í”„ë¡œì íŠ¸ì— ë”°ë¼ í•´ë‹¹ ê°€ìƒí™˜ê²½ì˜ êµ¬ì²´ì ì¸ ë‚´ìš©ë“¤ì„ êµ¬ì¶•í•´ ë‚˜ê°€ë©´ ëœë‹¤.
- ì´ëŸ¬í•œ í™˜ê²½ ë° ë‚´ìš©ì˜ êµ¬ì²´ì ì¸ êµ¬ì¶• ê³¼ì •ì—ì„œ í•„ìš”í•œ ê²ƒì´ íŒ¨í‚¤ì§€ ë§¤ë‹ˆì§• íˆ´ì¸ pip, pip3, pipenv ë“±ì´ë‹¤.

## pipenv ì„¤ì¹˜í•˜ê¸°

- pipenv ëŠ” virtualenv ì™€ pip ê°€ ê²°í•©ëœ ë§Œí¼ ì „ì—­ ìœ„ì¹˜ì— ì„¤ì¹˜í•œë‹¤.
```text
1. python ë²„ì „ê³¼ pip ë²„ì „ ì²´í¬
    > python 3 ë¼ë©´ pip3 ì‚¬ìš©, ìµœì‹  ë²„ì „ìœ¼ë¡œ ì—…ê·¸ë ˆì´ë“œ
2. ì „ì—­ì— pipenv ì„¤ì¹˜
    > pip3 install pipenv
3. ì˜¬ë°”ë¥´ê²Œ ì„¤ì¹˜ë˜ì—ˆëŠ”ì§€ í™•ì¸
    > pip3 freeze
```
- ì—¬ê¸°ì„œ ì£¼ì˜í•  ì ì€ **sudo** ê¶Œí•œìœ¼ë¡œ ì„¤ì¹˜í•˜ë©´ ì•ˆëœë‹¤ëŠ” ê²ƒì´ë‹¤. ëŸ°íƒ€ì„ì´ë‚˜ ì¤‘ê°„ íŒ¨í‚¤ì§€ sudo ê¶Œí•œì´ ì—†ë‹¤ë©´ ì™„ì „ ê¼¬ì—¬ë²„ë¦´ ìˆ˜ ìˆë‹¤.

## pipenv ì‚¬ìš©í•˜ê¸°

- ê¸°ë³¸ ëª…ë ¹ì–´
    * open, run, shell / check, clean, graph, install, lock, sync, uninstall, update
- **ìˆœì„œ** : venv ìƒì„± - venv ì§„ì… ë° í™•ì¸ - íŒ¨í‚¤ì§€ ì„¤ì¹˜ - py ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰ - Pipfile, Pipfile.lock - venv ì œê±°
- ìƒì„±, ì§„ì…
    * í˜„ì¬ ìœ„ì¹˜ë¥¼ ê¸°ì¤€ìœ¼ë¡œ venv ë¥¼ ìƒì„±í•˜ê¸° ë•Œë¬¸ì—, ì›í•˜ëŠ” ë””ë ‰í† ë¦¬ë¥¼ ë§Œë“¤ê³  ê·¸ ìœ„ì¹˜ë¡œ ì´ë™í•´ì•¼ í•œë‹¤.
    * ```pipenv shell``` (ê°€ìƒí™˜ê²½ ì§„ì… ëª…ë ¹ì–´. ê°€ìƒí™˜ê²½ì´ ì—†ë‹¤ë©´ ìƒì„±)
    * ìˆœìˆ˜í•˜ê²Œ ìƒì„±ë§Œ í•˜ëŠ” ëª…ë ¹ì€ ```pipenv --python 3.7``` ì´ë‹¤.
- í™•ì¸
    * ```pipenv --py``` í•˜ë©´ ê°€ìƒí™˜ê²½ íŒŒì´ì¬ ëŸ°íƒ€ì„ì´ ìƒˆë¡­ê²Œ ì„¤ì¹˜ëœ ì§„ì§œ ìœ„ì¹˜ë¥¼ ì•Œ ìˆ˜ ìˆë‹¤.
    * ```$HOME/.local/share/virtualenvs/pipenv-tutorial-S-kj1fAT/bin/python``` ë³´í†µ ì´ëŸ° ê³³ì— ìœ„ì¹˜í•œë‹¤.
- í•„ìš”í•œ íŒ¨í‚¤ì§€ ì„¤ì¹˜
    * ```pipenv install [ì„¤ì¹˜í•  íŒ¨í‚¤ì§€ëª…]```
    * ë§Œì•½ **--dev** ì˜µì…˜ì„ ì‚¬ìš©í•œë‹¤ë©´ devDependencies ë¥¼ ì§€ì›í•˜ê²Œ ëœë‹¤.
    * ê·¸ëŸ¬ë©´ Pipfile ì— [dev-packages] í•˜ìœ„ì— ë¦¬ìŠ¤íŒ… ëœë‹¤.
    ```text
    $ cat Pipfile
    [[source]]
    name = "pypi"
    url = "https://pypi.org/simple"
    verify_ssl = true
    
    [dev-packages]
    requests = "*"  # ì—¬ê¸°ì—
    
    [packages]
    requests = "*"
    
    [requires]
    python_version = "3.7"
    ```
- venv ì—ì„œ íŒŒì´ì¬ ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰
    * í˜„ì¬ íŒŒì´ì¬ ë²„ì „ì„ ì¶œë ¥í•˜ëŠ” ê°„ë‹¨í•œ app.py íŒŒì¼ ì‘ì„±
    ```python
    # ğŸ“ app.py
    import sys
    
    def main():
        print(sys.version)
    
    if __name__ == '__main__':
        main()
    ```
    * ì‹¤í–‰ ê²°ê³¼
    ```text
    (pipenv-tutorial-S-kj1fAT) $ python app.py
    3.7.1 (default, Nov 28 2018, 11:51:47)
    [Clang 10.0.0 (clang-1000.11.45.5)]
    ```
    * ì§ì ‘ì‹¤í–‰ ë§ê³  pipenv ì—ì„œ scripts ë¡œ ì‹¤í–‰í•˜ë ¤ë©´ Pipfile ì˜ [scripts] ì„¹ì…˜ì— ì‹¤í–‰ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‘ì„±í•œë‹¤.
    ```text
    (pipenv-tutorial-S-kj1fAT) $ vi Pipfile
    
    [[source]]
    name = "pypi"
    url = "https://pypi.org/simple"
    verify_ssl = true
    
    [dev-packages]
    requests = "*"
    
    [packages]
    requests = "*"
    
    [requires]
    python_version = "3.7"
    
    [scripts]  # ì„¹ì…˜ì„ ë§Œë“¤ê³ 
    start = "python app.py"  # ì‹¤í–‰í•  ì»¤ë§¨ë“œë¥¼ ì¶”ê°€í•˜ì„¸ìš”, "" ë¡œ ê°ì‹¸ì£¼ì–´ì•¼ í•©ë‹ˆë‹¤
    ```
    * ê·¸ë¦¬ê³  ```pipenv run start``` ì»¤ë§¨ë“œë¥¼ ë‚´ë¦¬ë©´ ëœë‹¤.
    ```text
    (pipenv-tutorial-S-kj1fAT) $ pipenv run start
    3.7.1 (default, Nov 28 2018, 11:51:47)
    [Clang 10.0.0 (clang-1000.11.45.5)]
    ```
- Pipfile, Pipfile.lock ì„¤ëª…
    * ìµœì´ˆ ```pipenv shell``` ëª…ë ¹ì–´ë¥¼ í˜¸ì¶œí•˜ë©´ Pipfile ê³¼ Pipfile.lock ë‘ íŒŒì¼ì´ ìƒì„±ëœë‹¤.
    * ì „ìëŠ” pipenv ë¡œ ë§Œë“¤ì–´ì§„ ê°€ìƒí™˜ê²½ì´ ì°¸ì¡°í•˜ëŠ” í™˜ê²½ì„¤ì • íŒŒì¼ì´ê³ (íŒŒì´ì¬ ë²„ì „, ì„¤ì¹˜í•œ íŒ¨í‚¤ì§€, ìŠ¤í¬ë¦½íŠ¸ ë“±),
    * í›„ìëŠ” 'deterministic-builds', ì¦‰ ê²°ì •ë¡ ì  ë¹Œë“œë¥¼ êµ¬í˜„í•˜ëŠ” ë° ì‚¬ìš©í•œë‹¤.
        * deterministic-builds ë€, "Be able to get the exact same set of dependencies on multiple machines" ë¡œ ì •ì˜ë˜ëŠ”ë°
        * ì˜ë¯¸ëŠ” ì–´ë–¤ ìƒí™©ì—ì„œë„(ë³µìˆ˜ì˜ ë¨¸ì‹ , ì—¬ëŸ¬ ê°€ìƒí™˜ê²½ í˜¹ì€ ì„ ì˜ë¯¸í•˜ëŠ” ë“¯?) ë™ì¼í•˜ê²Œ site-packages tree ë¥¼ ìœ ì§€í•˜ë©° ì„¤ì¹˜í•  ìˆ˜ ìˆë„ë¡ ë³´ì¥í•œë‹¤ëŠ” ê²ƒì´ë‹¤.
        * ìœ„í‚¤ë°±ê³¼ì˜ <a href="" target="_blank">ê²°ì •ë¡ ì  ì•Œê³ ë¦¬ì¦˜</a>ì—ì„œëŠ” "ì–´ë–¤ íŠ¹ì •í•œ ì…ë ¥ì´ ë“¤ì–´ì˜¤ë©´ ì–¸ì œë‚˜ ë˜‘ê°™ì€ ê³¼ì •ì„ ê±°ì³ì„œ ë˜‘ê°™ì€ ê²°ê³¼ë¥¼ ë‚´ë†“ëŠ”ë‹¤"ê³  ì„¤ëª…í•œë‹¤.
- ë§Œë“¤ì—ˆë˜ venv ì œê±°í•˜ê¸°
    * ```pipenv --rm```
    ```text
    (pipenv-tutorial-S-kj1fAT) $ pipenv --rm
    Removing virtualenv (/Users/doondoony/.local/share/virtualenvs/pipenv-tutorial-t1c6CZgR) â€¦
    ```
    * ì‹¤ì œ ê°€ìƒí™˜ê²½ì´ ì„¤ì¹˜ë˜ì—ˆë˜ __$HOME/.local/**__ í•˜ìœ„ ë””ë ‰í† ë¦¬ê°€ ì‚­ì œë˜ì—ˆìŒì„ í™•ì¸ ê°€ëŠ¥í•˜ë‹¤.
    * ì•„ë‹ˆë©´ ì´ ì‹¤ì œê²½ë¡œë¥¼ ```rm -rf``` ëª…ë ¹ìœ¼ë¡œ ê·¸ëƒ¥ ì‚­ì œí•´ë²„ë ¤ë„ ëœë‹¤.



